(this["webpackJsonp@aoe2lobby/web"]=this["webpackJsonp@aoe2lobby/web"]||[]).push([[0],{182:function(e,t,n){e.exports=n(345)},187:function(e,t,n){},188:function(e,t,n){},345:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(4),c=n.n(o),i=(n(187),n(188),n(189),n(348)),l=n(38),s=n(63),u=n(24),d=n(68),m=n.n(d),b=n(114),p=function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://pascalraszyk.de/cors.php");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){return function(){var e=Object(b.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"LOBBIES_LOADING",payload:null}),e.next=3,p("https://aoe2.net/api/lobbies?game=aoe2de&qs=".concat(+new Date));case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,t({type:"LOBBIES_FETCHED",payload:a}),t({type:"STOP_LOBBIES_LOADING",payload:null});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=n(166),E=n(56),g=n(347),h=n(177),v=n(160),O=n(349),w=n(85),I=n(5),x=n(346);function k(){var e=Object(v.a)(["\n   padding: 30px 0;\n"]);return k=function(){return e},e}var L=n(161).a.div(k()),j=function(){var e=Object(u.e)().params.id,t=Object(l.c)((function(e){return e.lobbies})),n=Object(a.useState)(e),o=Object(h.a)(n,2),c=o[0],i=o[1],d=Object(l.b)();Object(a.useEffect)((function(){d(f())}),[]);var m=[{title:"Name",dataIndex:"name",key:"name",render:function(e){return"".concat(e)}},{title:"Average ELO",dataIndex:"average_rating",key:"average_rating",render:function(e){return"".concat(e)}},{title:"Players",dataIndex:"num_players",key:"num_players",render:function(e){return"".concat(e)}},{title:"Max players",dataIndex:"num_slots",key:"max_slots",render:function(e){return"".concat(e)}},{title:"Server",dataIndex:"server",key:"server",render:function(e){return"".concat(e)}},{title:"Actions",dataIndex:"actions",key:"actions",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement(s.b,{to:"/lobby/"+t.lobby_id},"View Players"))}}];return r.a.createElement(L,null,r.a.createElement("h2",null,"Enter Game ID"),r.a.createElement("div",null,r.a.createElement(O.a,{value:c,style:{width:"400px"},size:"large",min:1,onChange:i})),r.a.createElement("br",null),r.a.createElement(s.b,{to:"/lobby/".concat(c)},r.a.createElement(w.a,{type:"primary"},"Next ",r.a.createElement(I.a,{type:"right"}))),r.a.createElement(x.a,{dashed:!0}),r.a.createElement("h2",null,"All lobbies"),r.a.createElement(g.a,{columns:m,dataSource:t.lobbies}))},_=function(){var e=Object(u.e)().params.id,t=Object(l.c)((function(e){return e.lobbies})),n=t.lobbies.find((function(t){return t.lobby_id===e})),o=Object(l.b)();if(Object(a.useEffect)((function(){o(f());var e=setInterval((function(){t.isLoading||o(f())}),5e3);return function(){return clearInterval(e)}}),[]),!n&&t.isLoading)return r.a.createElement(L,null,r.a.createElement(y.a,null));if(!n&&!t.isLoading)return r.a.createElement(L,null,r.a.createElement(E.a,{description:r.a.createElement(r.a.Fragment,null,"No lobby was found with GameID#",e,".",r.a.createElement("br",null),"This might happen sometimes when AOE2 does not update the lobby database. Please wait a few second or try reopening the lobby. Sometimes AOE lobbies are broken, this happens if you choose a server that is too far away from your location.")}));return r.a.createElement(L,null,r.a.createElement("h1",null,n.name," ",t.isLoading&&r.a.createElement(y.a,null)),r.a.createElement(g.a,{columns:[{title:"Name",dataIndex:"name",key:"name",render:function(e){return"".concat(e)}},{title:"ELO",dataIndex:"rating",key:"rating",render:function(e){return"".concat(e||"-")},sorter:function(e,t){return e.rating>t.rating?1:e.rating<t.rating?-1:0},sortDirections:["descend","ascend"]},{title:"Games",dataIndex:"games",key:"games",render:function(e){return"".concat(e||"-")},sorter:function(e,t){return e.games>t.games?1:e.games<t.games?-1:0},sortDirections:["descend","ascend"]},{title:"Wins",dataIndex:"wins",key:"wins",render:function(e){return"".concat(e||"-")},sorter:function(e,t){return e.wins>t.wins?1:e.wins<t.wins?-1:0},sortDirections:["descend","ascend"]},{title:"Streak",dataIndex:"streak",key:"streak",render:function(e){return"".concat(e||"-")},sorter:function(e,t){return e.wins>t.wins?1:e.wins<t.wins?-1:0},sortDirections:["descend","ascend"]}],pagination:!1,dataSource:n.players.filter((function(e){return e.profile_id}))}))},B=n(35),S=n(174),D=n(86),A={lobbies:[],isLoading:!1},N=Object(B.combineReducers)({lobbies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOBBIES_LOADING":return Object(D.a)({},e,{isLoading:!0});case"LOBBIES_FETCHED":return Object(D.a)({},e,{lobbies:t.payload});case"STOP_LOBBIES_LOADING":return Object(D.a)({},e,{isLoading:!1})}return e}}),T=n(175);var G=function(e){var t=[S.a],n=[B.applyMiddleware.apply(void 0,t)],a=T.composeWithDevTools.apply(void 0,n);return Object(B.createStore)(N,e,a)}(void 0);var F=function(){return r.a.createElement(l.a,{store:G},r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement(u.a,{exact:!0,path:"/"},r.a.createElement(i.a,{style:{border:"1px solid rgb(235, 237, 240)"},title:"AOE2 Lobby",subTitle:"ELO insights"}),r.a.createElement(j,null)),r.a.createElement(u.a,{path:"/lobby/:id",component:function(e){var t=e.match,n=e.history;return r.a.createElement(r.a.Fragment,null,r.a.createElement(i.a,{style:{border:"1px solid rgb(235, 237, 240)"},onBack:function(){n.goBack()},title:"AOE2 Lobby",subTitle:"#".concat(t.params.id)}),r.a.createElement(_,null))}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[182,1,2]]]);
//# sourceMappingURL=main.9465353f.chunk.js.map